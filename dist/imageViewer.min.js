!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=15)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._enableMultiple=t,this._handlers={}}return n(e,[{key:"on",value:function(e,t,i){(i=void 0===i?this._enableMultiple:i)?(this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(t)):this._handlers[e]=[t]}},{key:"off",value:function(e){delete this._handlers[e]}},{key:"emit",value:function(e){for(var t=this,i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];var s=this._handlers[e]||[];s.length&&s.forEach(function(e){e.apply(t,n)})}}]),e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._locks={}}return n(e,[{key:"createLock",value:function(e){this._locks[e]=!1}},{key:"deleteLock",value:function(e){delete this._locks[e]}},{key:"getLock",value:function(e){this._locks[e]=!0}},{key:"releaseLock",value:function(e){this._locks[e]=!1}},{key:"getLockState",value:function(e){return this._locks[e]}}]),e}();t.default=new a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LOCK_NAME="STOP_SWIPE",t.ITEM_ANIMATION_CLASS="viewer-animation",t.LEFT_IMG=-1,t.CENTER_IMG=0,t.RIGHT_IMG=1},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a,s=(n=document.createElement("div").style,a="",["transform","webkitTransform","MozTransform","oTransform","msTransform"].forEach(function(e){void 0!==n[e]&&(a=e)}),a);t.query=function(e,t){return(t=t||document).querySelectorAll(e)},t.removeElement=function(e){var t=e.parentNode;t&&t.removeChild(e)},t.setTranslateStyle=function(e,t,i){e.style[s]="translate3d("+t+"px,"+i+"px,0)"},t.setScaleAndTranslateStyle=function(e,t,i,n){e.style[s]="scale3d("+t+","+t+",1) translate3d("+i+"px,"+n+"px,0)"}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,n=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var a,s=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(a=0===s.indexOf("//")?s:0===s.indexOf("/")?i+s:n+s.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}},function(e,t,i){var n,a,s={},r=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=n.apply(this,arguments)),a}),l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var i=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),o=null,h=0,c=[],u=i(4);function d(e,t){for(var i=0;i<e.length;i++){var n=e[i],a=s[n.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](n.parts[r]);for(;r<n.parts.length;r++)a.parts.push(w(n.parts[r],t))}else{var l=[];for(r=0;r<n.parts.length;r++)l.push(w(n.parts[r],t));s[n.id]={id:n.id,refs:1,parts:l}}}}function f(e,t){for(var i=[],n={},a=0;a<e.length;a++){var s=e[a],r=t.base?s[0]+t.base:s[0],l={css:s[1],media:s[2],sourceMap:s[3]};n[r]?n[r].parts.push(l):i.push(n[r]={id:r,parts:[l]})}return i}function v(e,t){var i=l(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),c.push(t);else if("bottom"===e.insertAt)i.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=l(e.insertInto+" "+e.insertAt.before);i.insertBefore(t,a)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function m(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),g(t,e.attrs),v(e,t),t}function g(e,t){Object.keys(t).forEach(function(i){e.setAttribute(i,t[i])})}function w(e,t){var i,n,a,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var r=h++;i=o||(o=m(t)),n=E.bind(null,i,r,!1),a=E.bind(null,i,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),v(e,t),t}(t),n=function(e,t,i){var n=i.css,a=i.sourceMap,s=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||s)&&(n=u(n));a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var r=new Blob([n],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(r),l&&URL.revokeObjectURL(l)}.bind(null,i,t),a=function(){p(i),i.href&&URL.revokeObjectURL(i.href)}):(i=m(t),n=function(e,t){var i=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),a=function(){p(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var i=f(e,t);return d(i,t),function(e){for(var n=[],a=0;a<i.length;a++){var r=i[a];(l=s[r.id]).refs--,n.push(l)}e&&d(f(e,t),t);for(a=0;a<n.length;a++){var l;if(0===(l=n[a]).refs){for(var o=0;o<l.parts.length;o++)l.parts[o]();delete s[l.id]}}}};var y,_=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function E(e,t,i,n){var a=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=_(t,a);else{var s=document.createTextNode(a),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var a=(r=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),s=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[i].concat(s).concat([a]).join("\n")}var r;return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},a=0;a<this.length;a++){var s=this[a][0];"number"==typeof s&&(n[s]=!0)}for(a=0;a<e.length;a++){var r=e[a];"number"==typeof r[0]&&n[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),t.push(r))}},t}},function(e,t,i){(e.exports=i(6)(!1)).push([e.i,".image-viewer{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:100;font-size:0;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}.image-viewer .viewer-animation{transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.image-viewer .viewer{display:inline-block;position:absolute;top:50%;width:100%;text-align:center;-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.image-viewer .image-header{position:absolute;top:0;left:0;width:100%;color:#fff;font-size:12px;z-index:11}.image-viewer .image-body{width:100%;height:100%;font-size:0;z-index:10}.image-viewer .image-body .viewer-wrapper{height:100%}.image-viewer .image-body .panel{display:inline-block;overflow:hidden}.image-viewer .image-body .panel img{max-width:100%;max-height:100%}.image-viewer .image-body .panel span{display:none;font-size:12px;color:#fff}.image-viewer .image-footer{position:absolute;left:0;bottom:0;width:100%;color:#fff;font-size:12px;z-index:11}.image-viewer .image-animation{position:absolute;z-index:5;will-change:transform,width,height}.image-viewer .image-animation img{max-width:100%;max-height:100%}.image-viewer .image-animation.hide{width:0!important;height:0!important;will-change:auto}",""])},function(e,t,i){var n=i(7);"string"==typeof n&&(n=[[e.i,n,""]]);var a={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};i(5)(n,a);n.locals&&(e.exports=n.locals)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(3),s=i(2),r=o(i(1)),l=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t,i,n,s,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=new l.default(!1),this.imageViewer=t,this.el=i,this.panelEl=i.firstElementChild,this.imageEl=(0,a.query)("img",this.el)[0],this.tipsEl=(0,a.query)("span",this.el)[0],this.src="",this.index=r,this.displayIndex=0,this.width=n,this.height=s,this.realWidth=0,this.realHeight=0,this.translateX=0,this.translateY=0,this.scale=1,this.currentScale=1,this.translatePanelX=0,this.translatePanelY=0,this.currentPanelX=0,this.currentPanelY=0,this.allowDistanceX=0,this.allowDistanceY=0,this.needResetX=!1,this.needResetY=!1,this.SUCCESS_EVENT="LOAD_COMPLETE",this.FAIL_EVENT="LOAD_FAIL",this._bindEvent()}return n(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],i=arguments[2],n=this,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments[4],l=function(){t&&(n.scale=1,n.allowDistanceX=n.allowDistanceY=0),s&&(n.imageEl.style.display=""),n.translatePanelX=0,n.translatePanelY=0,n.currentPanelX=0,n.currentPanelY=0,n.realWidth=n.panelEl.clientWidth*n.scale,n.realHeight=n.panelEl.clientHeight*n.scale,n.translateX=n.displayIndex*n.width,n.translateY=-n.el.clientHeight/2,n.needResetX=n.needResetY=!1,(0,a.setScaleAndTranslateStyle)(n.panelEl,n.scale,n.translatePanelX,n.translatePanelY),(0,a.setTranslateStyle)(n.el,n.translateX,n.translateY),i&&i.apply(n)};return this.displayIndex=e,s?(this.src=r,this.imageEl.src=this.src,this.imageEl.style.display="none",this.event.on(this.SUCCESS_EVENT,function(){l(),n.tipsEl.style.display="none"}),this.event.on(this.FAIL_EVENT,function(){n.imageEl.style.display="none",r&&(n.tipsEl.style.display="inline-block")}),(0,a.setTranslateStyle)(this.el,this.displayIndex*this.width,this.translateY)):l(),this}},{key:"_bindEvent",value:function(){var e=this;this.imageEl.addEventListener("load",function(){e.event.emit(e.SUCCESS_EVENT)},!1),this.imageEl.addEventListener("error",function(){e.event.emit(e.FAIL_EVENT)},!1)}},{key:"_pinchStart",value:function(){this.removeAnimation(),this.panelEl.style.willChange="transform"}},{key:"_pinch",value:function(e){var t=e*this.scale+this.scale;return t>.5&&t<8&&(this.currentScale=t,(0,a.setScaleAndTranslateStyle)(this.panelEl,this.currentScale,this.translatePanelX,this.translatePanelY)),this}},{key:"_pinchEnd",value:function(e){return this.scale=isNaN(e)?this.currentScale:e,this.realWidth=this.panelEl.clientWidth*this.scale,this.realHeight=this.panelEl.clientHeight*this.scale,this.allowDistanceX=(this.realWidth-this.width)/2/this.scale+2,this.allowDistanceY=(this.realHeight-this.height)/2/this.scale+2,(this.realWidth<this.width||this.realHeight<this.height)&&this.init(this.displayIndex,!1,null,!1),this.isScale()?r.default.getLock(s.LOCK_NAME):r.default.releaseLock(s.LOCK_NAME),this.panelEl.style.willChange="auto",this}},{key:"_calculate",value:function(e,t){return e>0?e-t:e+t}},{key:"_translateStart",value:function(){this.removeAnimation()}},{key:"_translatePanel",value:function(e){var t=0,i=e.deltaX,n=e.deltaY;return this.realWidth<=this.width&&i?this.imageViewer._dealWithMoveAction({deltaX:i},!0):(this.allowDistanceX>0&&i&&(this.currentPanelX=i/this.scale+this.translatePanelX,this.needResetX=!(-this.allowDistanceX<this.currentPanelX&&this.currentPanelX<this.allowDistanceX)),this.needResetX?(this.imageViewer._dealWithMoveAction({deltaX:this._calculate(this.currentPanelX,this.allowDistanceX)},!0),t=this.currentPanelX>0?this.allowDistanceX:-this.allowDistanceX):(this.imageViewer._dealWithMoveAction({deltaX:0},!0),t=this.currentPanelX)),this.allowDistanceY>0&&n&&(this.currentPanelY=n/this.scale+this.translatePanelY,this.needResetY=!(-this.allowDistanceY<this.currentPanelY&&this.currentPanelY<this.allowDistanceY)),(0,a.setScaleAndTranslateStyle)(this.panelEl,this.scale,t,this.currentPanelY),this}},{key:"_translatePanelEnd",value:function(e){var t=this,i=!1,n=e.deltaX;return this.realWidth<=this.width&&n?i=this.imageViewer._dealWithMoveActionEnd({deltaX:n},!0):this.needResetX&&(i=this.imageViewer._dealWithMoveActionEnd({deltaX:this._calculate(this.currentPanelX,this.allowDistanceX)},!0)),i?(this.init(this.displayIndex,!0,null,!1),window.requestAnimationFrame(function(){r.default.releaseLock(s.LOCK_NAME)})):(this.needResetX?this.translatePanelX=this.currentPanelX>0?this.allowDistanceX:-this.allowDistanceX:this.translatePanelX=this.currentPanelX,this.needResetY?this.translatePanelY=this.currentPanelY>0?this.allowDistanceY:-this.allowDistanceY:this.translatePanelY=this.currentPanelY,(this.needResetX||this.needResetY)&&window.requestAnimationFrame(function(){t.addAnimation(),(0,a.setScaleAndTranslateStyle)(t.panelEl,t.scale,t.translatePanelX,t.translatePanelY)}),this.needResetX=this.needResetY=!1),this}},{key:"isScale",value:function(){return Math.abs(this.scale-1)>.01}},{key:"addAnimation",value:function(){this.panelEl.classList.add(s.ITEM_ANIMATION_CLASS),this.el.classList.add(s.ITEM_ANIMATION_CLASS)}},{key:"removeAnimation",value:function(){this.panelEl.classList.remove(s.ITEM_ANIMATION_CLASS),this.el.classList.remove(s.ITEM_ANIMATION_CLASS)}}]),e}();t.default=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test-passive",null,a)}catch(e){}t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=r(i(0)),s=r(i(10));function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=0,h=function(){function e(t,i,n){l(this,e),this.time=(new Date).getTime(),this.srcEvent=t,this.prevEvent=i,this.touch=n,this.type=[],this._getTouches(),this._initDelta(),this._initScale(),this._initTap(),this.preventDefault(),this.stopPropagation()}return n(e,[{key:"_getTouches",value:function(){var e=this.srcEvent.touches.length?this.srcEvent.touches:this.srcEvent.changedTouches;this.touches=Array.prototype.slice.call(e,0)}},{key:"_initTap",value:function(){var e=this.touch._startEvent;e&&"touchstart"===this.srcEvent.type&&1===e.touches.length&&1===this.touches.length&&(this.time-e.time<250&&Math.abs(this.touches[0].clientX-e.touches[0].clientX)<10&&Math.abs(this.touches[0].clientY-e.touches[0].clientY)<10&&(this.type=["doubleTap"]))}},{key:"_initDelta",value:function(){var e=this.touches[0].clientX,t=this.touches[0].clientY;this.prevEvent?(e-=this.prevEvent.touches[0].clientX,t-=this.prevEvent.touches[0].clientY):e=t=0,this.deltaX=e,this.deltaY=t,this.type.push("pan")}},{key:"_initScale",value:function(){var e=1;if(this.touch.enableScale&&this.prevEvent&&this.prevEvent.touches.length>1&&this.touches.length>1){var t=Math.abs(this.touches[0].clientX-this.touches[1].clientX),i=Math.abs(this.touches[0].clientY-this.touches[1].clientY),n=Math.abs(this.prevEvent.touches[0].clientX-this.prevEvent.touches[1].clientX),a=Math.abs(this.prevEvent.touches[0].clientY-this.prevEvent.touches[1].clientY);e=Math.sqrt(t*t+i*i)/Math.sqrt(n*n+a*a),this.type.push("pinch")}this.scale=e}},{key:"stopPropagation",value:function(){this.srcEvent.stopPropagation&&this.srcEvent.stopPropagation()}},{key:"preventDefault",value:function(){this.srcEvent.preventDefault&&this.srcEvent.preventDefault()}}]),e}(),c=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),t&&(this.id=++o,this.el=t,this.enableScale=!!i.enableScale,this.hasTriggerStart=!1,this._startEvent=null,this._prevEvent=null,this._commonEvent=new a.default,this._bindEvent())}return n(e,[{key:"_bindEvent",value:function(){var e=!!s.default&&{passive:!1};this.el.addEventListener("touchstart",this,e),this.el.addEventListener("touchmove",this,e),this.el.addEventListener("touchend",this,e),this.el.addEventListener("touchcancel",this,e)}},{key:"_start",value:function(e){this._startEvent=new h(e,null,this)}},{key:"_move",value:function(e){var t=new h(e,this._startEvent,this);this.hasTriggerStart||(this.hasTriggerStart=!0,t.type.includes("pinch")&&this._commonEvent.emit("pinchstart",this._startEvent),t.type.includes("pan")&&this._commonEvent.emit("panstart",this._startEvent)),t.type.includes("pinch")&&this._commonEvent.emit("pinch",t),t.type.includes("pan")&&this._commonEvent.emit("panmove",t),this._prevEvent=t}},{key:"_end",value:function(e){var t=new h(e,this._startEvent,this);this._prevEvent&&(this._prevEvent.type.includes("pinch")&&this._commonEvent.emit("pinchend",t),t.type.includes("pan")&&this._commonEvent.emit("panend",t),this.hasTriggerStart=!1),this._startEvent.type.includes("doubleTap")&&this._commonEvent.emit("doubleTap",t)}},{key:"_cancel",value:function(){}},{key:"handleEvent",value:function(e){switch(e.type){case"touchstart":this._start(e);break;case"touchmove":this._move(e);break;case"touchend":this._end(e);break;case"touchcancel":this._cancel(e)}}},{key:"on",value:function(e,t){this._commonEvent.on(e,t)}}]),e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.debug=function(e){window.console.log("[ImageViewer]:"+e)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(12),s=i(3),r=i(2),l=c(i(1)),o=c(i(11)),h=c(i(9));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opt=i,this.duration=this.opt.duration||10,this.el=null,this.headerEl=null,this.bodyEl=null,this.footerEl=null,this.viewerWrapperEl=null,this.animationEl=null,this.currentNumberEl=null,this.totalNumberEl=null,this.images=t,this.imagesLength=t.length,this.container=i.container||"body",this.enableScale=void 0===i.enableScale||i.enableScale,this.currentIndex=i.startIndex||0,this.viewers=[],this.scaleStart=1,this.isScale=!1,this.width=0,this.height=0,this.itemList=[],this.translateX=0,this.touch=null}return n(e,[{key:"_create",value:function(){this.el=(0,s.query)(".image-viewer")[0],this.destroy();var e=document.createElement("div");e.innerHTML='<div class="image-viewer">\n                <div class="image-header"></div>\n                <div class="image-body">\n                    <div class="viewer-wrapper">\n                        <div class="viewer"><div class="panel"><img><span>图片加载失败</span></div></div>\n                        <div class="viewer"><div class="panel"><img><span>图片加载失败</span></div></div>\n                        <div class="viewer"><div class="panel"><img><span>图片加载失败</span></div></div>     \n                    </div>\n                </div>\n                <div class="image-footer"></div>\n                <div class="image-animation hide"><img></div> \n            </div>',this.el=e.firstElementChild,(0,s.query)(this.container)[0].appendChild(this.el),this.headerEl=(0,s.query)(".image-header",this.el)[0],this.bodyEl=(0,s.query)(".image-body",this.el)[0],this.footerEl=(0,s.query)(".image-footer",this.el)[0],this.viewerWrapperEl=(0,s.query)(".image-body .viewer-wrapper",this.el)[0],this.animationEl=(0,s.query)(".image-animation",this.el)[0],this.itemList=this.viewerWrapperEl.children,this.width=this.el.clientWidth,this.height=this.el.clientHeight,this.opt.headerRender&&(this.headerEl.innerHTML=this.opt.headerRender()),this.opt.footerRender&&(this.footerEl.innerHTML=this.opt.footerRender()),this.currentNumberEl=(0,s.query)(".number-current",this.el)[0],this.totalNumberEl=(0,s.query)(".number-total",this.el)[0]}},{key:"_init",value:function(){this.viewers=[];for(var e,t=0,i=this.itemList.length;t<i;t++)e=this.itemList[t],this.viewers.push(new h.default(this,e,this.width,this.height,t));l.default.createLock(r.LOCK_NAME)}},{key:"_updateCountElement",value:function(){this.currentNumberEl&&(this.currentNumberEl.innerText=this.currentIndex+1),this.totalNumberEl&&(this.totalNumberEl.innerText=this.imagesLength)}},{key:"_bindEvent",value:function(){var e=this,t=new o.default(this.bodyEl,{enableScale:this.enableScale});t.on("panstart",function(t){return e._dealPanAction(t,"panstart")}),t.on("panmove",function(t){return e._dealPanAction(t,"panmove")}),t.on("panend",function(t){return e._dealPanAction(t,"panend")}),this.enableScale&&(t.on("doubleTap",this.reset.bind(this)),t.on("pinchstart",function(t){return e._dealScaleAction(t,"pinchstart")}),t.on("pinch",function(t){return e._dealScaleAction(t,"pinch")}),t.on("pinchend",function(t){return e._dealScaleAction(t,"pinchend")})),this.touch=t}},{key:"_dealPanAction",value:function(e,t){if(!this.isScale)switch(t){case"panstart":this._dealWithMoveActionStart(e);break;case"panmove":this._dealWithMoveAction(e);break;case"panend":this._dealWithMoveActionEnd(e)}}},{key:"_dealScaleAction",value:function(e,t){switch(t){case"pinchstart":this._dealWithScaleActionStart(e);break;case"pinch":this._dealWithScaleAction(e);break;case"pinchend":this._dealWithScaleActionEnd(e)}}},{key:"_dealWithMoveActionStart",value:function(e){l.default.getLockState(r.LOCK_NAME)?this._getCurrentViewer()._translateStart(e):(this.viewerWrapperEl.classList.remove(r.ITEM_ANIMATION_CLASS),this.opt.beforeSwipe&&this.opt.beforeSwipe(this.currentIndex),this.viewerWrapperEl.style.willChange="transform")}},{key:"_dealWithMoveAction",value:function(e,t){l.default.getLockState(r.LOCK_NAME)&&!t?this._getCurrentViewer()._translatePanel(e):(t&&this.viewerWrapperEl.classList.remove(r.ITEM_ANIMATION_CLASS),(0,s.setTranslateStyle)(this.viewerWrapperEl,this.translateX+e.deltaX,0))}},{key:"_dealWithMoveActionEnd",value:function(e,t){if(!l.default.getLockState(r.LOCK_NAME)||t){var i=e.deltaX,n=!1,a=!1;return 0===this.currentIndex&&i>0&&this.opt.swipeFirstRight?a=this.opt.swipeFirstRight(this,Math.abs(i)):this.currentIndex===this.imagesLength-1&&i<0&&this.opt.swipeLastLeft&&(a=this.opt.swipeLastLeft(this,Math.abs(i))),a||(0!==i&&this.viewerWrapperEl.classList.add(r.ITEM_ANIMATION_CLASS),0!==i&&this._checkDistance(i)?(this.viewers.forEach(function(e){e.removeAnimation()}),n=i>0?this.swipeToPrev():this.swipeToNext(),this._updateCountElement()):(0,s.setTranslateStyle)(this.viewerWrapperEl,this.translateX,0),this.opt.afterSwipe&&this.opt.afterSwipe(this.currentIndex)),this.viewerWrapperEl.style.willChange="auto",n}this._getCurrentViewer()._translatePanelEnd(e)}},{key:"_dealWithScaleActionStart",value:function(e){this.isScale=!0,this.scaleStart=e.scale,this._getCurrentViewer()._pinchStart()}},{key:"_dealWithScaleAction",value:function(e){this._getCurrentViewer()._pinch(e.scale-this.scaleStart)}},{key:"_dealWithScaleActionEnd",value:function(){var e=this;this._getCurrentViewer()._pinchEnd(),window.requestAnimationFrame(function(){e.isScale=!1})}},{key:"_getCurrentViewer",value:function(){return this.viewers[1]}},{key:"_checkDistance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Math.abs(e)>this.width/5}},{key:"_getPrevImage",value:function(){var e=this.currentIndex;return this.opt.loop&&this.imagesLength>2&&(e=0===this.currentIndex?this.imagesLength:this.currentIndex),this.images[e-1]||{url:""}}},{key:"_getCurrentImage",value:function(){return this.images[this.currentIndex]||{url:""}}},{key:"_getNextImage",value:function(){var e=this.currentIndex;return this.opt.loop&&this.imagesLength>2&&(e=this.currentIndex===this.imagesLength-1?-1:this.currentIndex),this.images[e+1]||{url:""}}},{key:"_getSpecificImage",value:function(e){return this.images[e]||{url:""}}},{key:"_getPositionAndSize",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}},{key:"_fadeIn",value:function(e){var t=this,i=this.duration,n=this._getPositionAndSize(e.el),a=this.animationEl.style;a.top=n.top+"px",a.left=n.left+"px",a.width=n.width+"px",a.height=n.height+"px";var r=this._getCurrentViewer(),l=this._getPositionAndSize(r.el),o=(l.top-n.top)/i,h=(l.left-n.left)/i,c=(l.width-n.width)/i,u=(l.height-n.height)/i,d=1/i,f=0,v=0,p=0,m=!0;this.animationEl.children[0].src=e.small||e.url,this.animationEl.classList.remove("hide"),function e(){m?(m=!1,Math.abs(l.top-n.top-v)>=.5&&(v+=o,m=!0),Math.abs(l.left-n.left-p)>=.5&&(p+=h,m=!0),Math.abs(l.width-n.width)>=.5&&(n.width+=c,m=!0,a.width=n.width+"px"),Math.abs(l.height-n.height)>=.5&&(n.height+=u,m=!0,a.height=n.height+"px"),f<1&&(f+=d,m=!0,t.el.style.opacity=f),(0,s.setTranslateStyle)(t.animationEl,p,v),window.requestAnimationFrame(e)):window.requestAnimationFrame(function(){t.el.style.opacity=1,t.bodyEl.style.visibility="visible",t.animationEl.classList.add("hide")})}()}},{key:"_fadeOut",value:function(e){var t=this,i=this.duration,n=this._getPositionAndSize(e.el),a=this.animationEl.style;a.top=n.top+"px",a.left=n.left+"px";var r=this._getCurrentViewer(),l=this._getPositionAndSize(r.el),o=l.top-n.top,h=l.left-n.left,c=l.width-n.width,u=l.height-n.height,d=o/i,f=h/i,v=c/i,p=u/i,m=1/i,g=1,w=l.width,y=l.height,_=!0;(0,s.setTranslateStyle)(this.animationEl,h,o),a.width=l.width+"px",a.height=l.height+"px";this.animationEl.children[0].src=e.url,this.animationEl.classList.remove("hide"),function e(){_?(_=!1,Math.abs(o)>.5&&(o-=d,_=!0),Math.abs(h)>.5&&(h-=f,_=!0),w>=n.width&&(w-=v,_=!0,a.width=w+"px"),u>=n.height&&(y-=p,_=!0,a.height=y+"px"),g>0&&(g-=m,_=!0,t.el.style.opacity=g),(0,s.setTranslateStyle)(t.animationEl,h,o),window.requestAnimationFrame(e)):window.requestAnimationFrame(function(){t.el.style.display="none",t.animationEl.classList.add("hide")})}()}},{key:"reset",value:function(){var e=this.viewers[1];e.init(e.displayIndex,!0,null,!1),window.requestAnimationFrame(function(){l.default.releaseLock(r.LOCK_NAME)})}},{key:"loopViewers",value:function(e){var t=null;return 0===e?(t=this.viewers.shift(),this.viewers.push(t)):1===e&&(t=this.viewers.pop(),this.viewers=[t].concat(this.viewers)),t}},{key:"swipeToPrev",value:function(){if(this._getPrevImage().url){this.currentIndex--,this.translateX+=this.width,(0,s.setTranslateStyle)(this.viewerWrapperEl,this.translateX,0);var e=this._getSpecificImage(this.currentIndex-1).url;if(e||0===this.currentIndex){var t=this.loopViewers(1);t.init(t.displayIndex-3,!0,null,!0,e)}return!0}return(0,s.setTranslateStyle)(this.viewerWrapperEl,this.translateX,0),!1}},{key:"swipeToNext",value:function(){if(this._getNextImage().url){this.currentIndex++,this.translateX-=this.width,(0,s.setTranslateStyle)(this.viewerWrapperEl,this.translateX,0);var e=this._getSpecificImage(this.currentIndex+1).url;if(e||this.currentIndex===this.imagesLength-1){var t=this.loopViewers(0);t.init(t.displayIndex+3,!0,null,!0,e)}return!0}return(0,s.setTranslateStyle)(this.viewerWrapperEl,this.translateX,0),!1}},{key:"swipeInByIndex",value:function(e,t){!isNaN(e)&&-1<e&&e<this.imagesLength?(this.currentIndex=e,this.translateX=0,(0,s.setTranslateStyle)(this.viewerWrapperEl,0,0),this.viewers=this.viewers.sort(function(e,t){return e.index<t.index}),this.viewers[0].init(r.LEFT_IMG,!0,null,!0,this._getPrevImage().url),this.viewers[1].init(r.CENTER_IMG,!0,t,!0,this._getCurrentImage().url),this.viewers[2].init(r.RIGHT_IMG,!0,null,!0,this._getNextImage().url),this._updateCountElement()):(0,a.debug)("illegal index!")}},{key:"setImageOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.length||(0,a.debug)("images array can not be empty!"),this.images=e,this.imagesLength=e.length,this.currentIndex=t,this._init()}},{key:"destroy",value:function(){this.el&&(0,s.removeElement)(this.el)}},{key:"close",value:function(){if(this.el){var e=this._getCurrentImage();this.opt.fadeOut&&e.el?(this.bodyEl.style.visibility="hidden",e.el&&this._fadeOut(e)):this.el.style.display="none"}}},{key:"open",value:function(e){var t=this;this.currentIndex=void 0===e?this.currentIndex:e,this.el||(this._create(),this._init(),this._bindEvent());var i=this._getCurrentImage();this.opt.fadeIn&&i.el&&(this.el.style.opacity=0,this.bodyEl.style.visibility="hidden"),window.requestAnimationFrame(function(){t.el.style.display="block",t.swipeInByIndex(t.currentIndex,function(){t.opt.fadeIn&&i.el&&t._fadeIn(i)})})}}]),e}();t.default=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=0,t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16.7-(i-e)),a=window.setTimeout(function(){t(i+n)},n);return e=i+n,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(i(14)),a=s(i(13));s(i(8));function s(e){return e&&e.__esModule?e:{default:e}}(0,n.default)(),window.ImageViewer=a.default,t.default=a.default}]);
//# sourceMappingURL=imageViewer.min.js.map